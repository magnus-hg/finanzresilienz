<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Finanz-Check – Erste Fragen</title>
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link
    href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap"
    rel="stylesheet"
  />
  <link rel="stylesheet" href="{{ url_for('static', filename='css/styles.css') }}" />
</head>
<body>
  <main class="container narrow">
    <header>
      <p class="eyebrow">Ihr persönlicher Finanz-Check</p>
      <h1>Erfassen Sie die wichtigsten Eckdaten</h1>
      <p>
        Beantworten Sie die folgenden drei Fragen, damit wir Ihre finanzielle Situation
        besser einschätzen können. Über die Info-Icons finden Sie kurze Erläuterungen,
        die Sie jederzeit in der JSON-Konfiguration anpassen können.
      </p>
    </header>

    <section class="card">
      <form class="question-form" novalidate>
        <div class="field">
          <div class="label-row">
            <label for="available-wealth">Wieviel Vermögen steht Ihnen aktuell zur Verfügung?</label>
            <button
              type="button"
              class="info-icon"
              aria-label="Hilfe zu verfügbarem Vermögen"
              data-help-key="availableWealth"
            >
              <span aria-hidden="true">i</span>
            </button>
          </div>
          <input
            type="number"
            id="available-wealth"
            name="available-wealth"
            min="0"
            step="500"
            placeholder="z. B. 12.000"
          />
        </div>

        <div class="field">
          <div class="label-row">
            <label for="yearly-savings">Wie viel können Sie jährlich sparen?</label>
            <button
              type="button"
              class="info-icon"
              aria-label="Hilfe zur jährlichen Sparrate"
              data-help-key="yearlySavings"
            >
              <span aria-hidden="true">i</span>
            </button>
          </div>
          <input
            type="number"
            id="yearly-savings"
            name="yearly-savings"
            min="0"
            step="200"
            placeholder="z. B. 4.800"
          />
        </div>

        <div class="field">
          <div class="label-row">
            <label for="housing-budget">Wie hoch ist Ihr Wohnbudget?</label>
            <button
              type="button"
              class="info-icon"
              aria-label="Hilfe zum Wohnbudget"
              data-help-key="housingBudget"
            >
              <span aria-hidden="true">i</span>
            </button>
          </div>
          <input
            type="number"
            id="housing-budget"
            name="housing-budget"
            min="0"
            step="50"
            placeholder="z. B. 1.200"
          />
        </div>

        <div class="field">
          <div class="label-row">
            <label for="investment-years">Zeitraum (Jahre, optional)</label>
          </div>
          <input
            type="number"
            id="investment-years"
            name="investment-years"
            min="1"
            max="80"
            step="1"
            value="80"
          />
          <p class="muted helper-text">
            Wählen Sie optional, über wie viele Jahre Ihr Vermögen im Kapitalmarkt angelegt wird.
          </p>
        </div>

        <p class="muted helper-text">
          Ihre Angaben werden lokal verarbeitet. Die Hinweise neben den Fragen lassen
          sich einfach in der Datei <code>static/config/help_texts.json</code>
          anpassen.
        </p>

        <section class="decision-section" aria-label="Anlagemöglichkeiten">
          <h2 class="section-title">Wie möchten Sie weiter vorgehen?</h2>
          <div class="option-grid">
            <label class="option-card option-blue" for="kapitalmarkt">
              <div class="option-header">
                <input type="checkbox" id="kapitalmarkt" name="kapitalmarkt" />
                <span class="option-label">Kapitalmarktanlage</span>
              </div>
              <details>
                <summary aria-label="Kapitalmarkt-Details"></summary>
                <div class="details-content">
                  <label for="capitalmarket-select">Kapitalmarktprodukt auswählen</label>
                  <select id="capitalmarket-select" name="capitalmarket-select">
                    {% for entry in capitalmarket_data %}
                    <option value="{{ loop.index0 }}">{{ entry.name }}</option>
                    {% endfor %}
                  </select>

                  <dl class="capitalmarket-details">
                    <div>
                      <dt>Name</dt>
                      <dd id="capitalmarket-name"></dd>
                    </div>
                    <div>
                      <dt>ISIN</dt>
                      <dd id="capitalmarket-isin"></dd>
                    </div>
                    <div>
                      <dt>Jährliches Wachstum</dt>
                      <dd id="capitalmarket-growth"></dd>
                    </div>
                  </dl>

                  <div class="simulation-controls">
                    <p class="muted helper-text">
                      Die Simulation nutzt Ihr verfügbares Vermögen, Ihre jährliche Sparrate und die
                      hinterlegte Rendite des gewählten Produkts.
                    </p>
                  </div>
                </div>
              </details>
            </label>

            <label class="option-card option-green" for="eigenheim">
              <div class="option-header">
                <input type="checkbox" id="eigenheim" name="eigenheim" />
                <span class="option-label">Eigenheim</span>
              </div>
              <details>
                <summary aria-label="Eigenheim-Details"></summary>
                <p class="placeholder-text">Weitere Inhalte folgen.</p>
              </details>
            </label>

            <label class="option-card option-orange" for="mietwohnung">
              <div class="option-header">
                <input type="checkbox" id="mietwohnung" name="mietwohnung" />
                <span class="option-label">Mietwohnung</span>
              </div>
              <details>
                <summary aria-label="Mietwohnung-Details"></summary>
                <p class="placeholder-text">Weitere Inhalte folgen.</p>
              </details>
            </label>
          </div>
        </section>

        <section class="chart-card" aria-live="polite">
          <div class="chart-header">
            <div>
              <h3>Vermögensentwicklung</h3>
              <p class="muted">
                Prognose mit <span id="selected-product">–</span> und
                <span id="selected-return">–</span> erwarteter Rendite über
                <span id="selected-years">–</span>.
              </p>
            </div>
            <div class="badge-group">
              <span id="invested-wealth" class="badge">Investiertes Vermögen: –</span>
              <span id="final-wealth" class="badge">Endvermögen: –</span>
            </div>
          </div>
          <canvas id="capitalmarket-chart" aria-label="Vermögensentwicklung"></canvas>
          <p id="capitalmarket-chart-note" class="chart-note muted">
            Die Berechnung nimmt an, dass Ihr verfügbarer Betrag einmal pro Jahr investiert wird und das gesamte Vermögen jedes
            Jahr um die erwartete Rendite wächst.
          </p>
          <p id="capitalmarket-chart-empty" class="muted">
            Tragen Sie Ihr verfügbares Vermögen und Ihre jährliche Sparrate ein. Die Grafik startet dann automatisch.
          </p>
        </section>
      </form>
    </section>
  </main>

  <script>
    window.helpTextsUrl = "{{ url_for('static', filename='config/help_texts.json') }}";
    window.capitalMarketData = {{ capitalmarket_data | tojson }};
  </script>
  <script
    src="https://cdn.jsdelivr.net/npm/chart.js@4.4.3/dist/chart.umd.min.js"
    crossorigin="anonymous"
  ></script>
  <script src="{{ url_for('static', filename='js/home.js') }}"></script>
</body>
</html>
