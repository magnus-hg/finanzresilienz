<!DOCTYPE html>
<html lang="de">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Meine Finanzanalyse – Vermietungsrechner</title>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="{{ url_for('static', filename='css/styles.css') }}" />
  </head>
  <body>
    <main class="container">
      <header>
        <p class="eyebrow">Meine Finanzanalyse</p>
        <h1>Finde vermietbare Objekte, die zu meinem Budget passen</h1>
        <p>
          Geben Sie nur Ihr verfügbares Vermögen und eine Postleitzahl ein. Wir schlagen passende
          Immobilien in der Umgebung vor, schätzen die Mieteinnahmen pro Quadratmeter und zeigen,
          ob Ihr Eigenkapital für den Kauf reicht. Mit einem Klick erhalten Sie die
          Finanzierungsdetails aus Zins, Tilgung, Restschuld und Mieteinnahmen.
        </p>
        <p>
          <a class="broker-button" style="width:auto" href="{{ url_for('mortgage_page') }}"
            >← Zurück zum Immobilienrechner</a
          >
        </p>
      </header>

      <section class="card">
        <form id="rental-finder-form" novalidate>
          <div class="form-grid">
            <div class="input-column">
              <p class="column-title">Pflichtangaben</p>
              <div class="field">
                <label for="rental-assets">Vermögen (EUR)</label>
                <input type="number" id="rental-assets" name="rental-assets" min="0" step="1000" required />
              </div>
              <div class="field">
                <label for="rental-postal-code">Postleitzahl (PLZ)</label>
                <input
                  type="text"
                  id="rental-postal-code"
                  name="rental-postal-code"
                  pattern="\d{5}"
                  inputmode="numeric"
                  placeholder="z. B. 10117"
                  required
                />
                <p class="muted">Wir nutzen die PLZ, um verfügbare Objekte und Mietspiegel zu schätzen.</p>
              </div>
            </div>
            <div class="input-column subtle">
              <p class="column-title">Standardannahmen</p>
              <div class="field">
                <label for="rental-interest">Zins p.a. (%)</label>
                <input type="number" id="rental-interest" name="rental-interest" min="0" step="0.1" value="4" />
                <p class="muted">Niedrigeingabe möglich, falls Sie ein günstiges Darlehen erwarten.</p>
              </div>
              <div class="field">
                <label for="rental-repayment">Tilgung p.a. (%)</label>
                <input type="number" id="rental-repayment" name="rental-repayment" min="0.1" step="0.1" value="2" />
                <p class="muted">Für Vermietungsszenarien oft etwas höher als 1&nbsp;% p.a.</p>
              </div>
              <div class="field">
                <label for="rental-additional-costs">Nebenkosten (%)</label>
                <input
                  type="number"
                  id="rental-additional-costs"
                  name="rental-additional-costs"
                  min="0"
                  step="0.1"
                  value="10.5"
                />
                <p class="muted">Aufschlag für Steuern, Notar, Makler – voreingestellt mit 10,5&nbsp;%.</p>
              </div>
            </div>
          </div>
          <button type="submit" class="primary">Vermietbare Objekte anzeigen</button>
        </form>
      </section>

      <section class="results-grid">
        <article class="card highlight">
          <h2>Maximaler Kaufpreis aus Eigenkapital</h2>
          <p id="rental-max-price" class="value">–</p>
          <p class="muted">Annahme: 20&nbsp;% Eigenkapital plus Nebenkosten müssen gedeckt sein.</p>
        </article>
        <article class="card">
          <h2>Ø Kaltmiete pro m²</h2>
          <p id="average-rent" class="value">–</p>
          <p class="muted">Aus zufälligen Angeboten im Umkreis geschätzt.</p>
        </article>
        <article class="card">
          <h2>Gefundene Objekte</h2>
          <p id="listing-count" class="value">–</p>
          <p class="muted" id="listing-summary">Noch keine Suche gestartet.</p>
        </article>
      </section>

      <section class="card market-insights">
        <h2>Passende Angebote &amp; Mieteinnahmen</h2>
        <p class="muted" id="rental-message">
          Geben Sie Ihr Vermögen und Ihre PLZ ein, um passende Objekte inklusive geschätzter Mieteinnahmen zu laden.
        </p>
        <div class="listings">
          <div class="listings-header">
            <h3>Verfügbare Immobilien</h3>
            <p class="muted" id="rental-listings-message">Es wurden noch keine Immobilien berechnet.</p>
          </div>
          <ul class="listing-results" id="rental-listing-results"></ul>
        </div>
      </section>

      <section class="next-steps">
        <h2>Nächste Schritte</h2>
        <div class="next-steps-grid">
          <article class="next-step-column">
            <h3 class="column-title">Kauf &amp; Finanzierung</h3>
            <p class="muted">Prüfen Sie, welchen Kaufpreis und welche Rate Sie sich leisten können.</p>
            <a class="broker-button" href="{{ url_for('mortgage_page') }}">Immobilienrechner öffnen</a>
          </article>
          <article class="next-step-column">
            <h3 class="column-title">Wohnungsangebote entdecken</h3>
            <p class="muted">Finden Sie zufällige Beispielobjekte in Ihrer Wunschregion.</p>
            <a class="broker-button" href="{{ url_for('housing_page') }}">Wohnungssuche starten</a>
          </article>
          <article class="next-step-column">
            <h3 class="column-title">Sparplan vergleichen</h3>
            <p class="muted">Nutzen Sie den ETF-Rechner, um den Vermögensaufbau daneben zu stellen.</p>
            <a class="broker-button" href="{{ url_for('home_page') }}">ETF-Sparplan simulieren</a>
          </article>
        </div>
      </section>
    </main>

    <script src="{{ url_for('static', filename='js/vermietungsrechner.js') }}"></script>
  </body>
</html>
