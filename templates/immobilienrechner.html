<!DOCTYPE html>
<html lang="de">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Meine Finanzanalyse – Immobilienrechner</title>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="{{ url_for('static', filename='css/styles.css') }}" />
  </head>
  <body>
    <main class="container">
      <header>
        <p class="eyebrow">Meine Finanzanalyse</p>
        <h1>Kann ich mir eine Immobilie leisten?</h1>
        <p>
          Wir berechnen, welchen Immobilienpreis Sie sich leisten können. Aus
          Ihrer monatlichen Rate und Ihrem Vermögen bestimmen wir das mögliche
          Darlehen, während Sie Zins- und Tilgungssatz flexibel wählen können.
          Standardmäßig rechnen wir mit 4&nbsp;% Zins p.a. und 1&nbsp;% Tilgung p.a.
          sowie dem maximalen Objektpreis ohne 10,5&nbsp;% Nebenkosten.
        </p>
        <p>
          <a class="broker-button" style="width:auto" href="{{ url_for('home_page') }}"
            >← Zurück zur Vermögensentwicklung</a
          >
        </p>
      </header>

      <section class="card">
        <form id="mortgage-form" novalidate>
          <div class="field">
            <label for="mortgage-budget">Verfügbare monatliche Rate (EUR)</label>
            <input
              type="number"
              id="mortgage-budget"
              name="mortgage-budget"
              min="0"
              step="50"
              required
            />
          </div>
          <div class="field">
            <label for="assets">Vermögen (EUR)</label>
            <input type="number" id="assets" name="assets" min="0" step="1000" required />
          </div>
          <div class="field">
            <label for="interest-rate">Zins p.a. (%)</label>
            <input
              type="number"
              id="interest-rate"
              name="interest-rate"
              min="0"
              step="0.1"
              value="4"
              required
            />
            <p class="muted">Beispiel: 1 entspricht 1&nbsp;% p.a.</p>
          </div>
          <div class="field">
            <label for="repayment-rate">Tilgung p.a. (%)</label>
            <input
              type="number"
              id="repayment-rate"
              name="repayment-rate"
              min="0.1"
              step="0.1"
              value="1"
              required
            />
            <p class="muted">Tilgung sollte &gt; 0 sein, z. B. 1 für 1&nbsp;% p.a.</p>
          </div>
          <div class="field">
            <label for="postal-code">Postleitzahl (PLZ)</label>
            <input
              type="text"
              id="postal-code"
              name="postal-code"
              pattern="\d{5}"
              inputmode="numeric"
              placeholder="z. B. 79100"
              required
            />
            <p class="muted">Wir nutzen die PLZ, um Durchschnittspreise in Ihrer Region zu berechnen.</p>
          </div>
          <button type="submit" class="primary">Bezahlbaren Preis berechnen</button>
        </form>
      </section>

      <section class="results-grid">
        <article class="card highlight">
          <h2>Maximaler Immobilienpreis</h2>
          <p id="total-cost" class="value">–</p>
          <p class="muted">Immobilienpreis ohne 10,5&nbsp;% Nebenkosten.</p>
        </article>
        <article class="card">
          <h2>Mögliches Darlehen</h2>
          <p id="loan-amount" class="value">–</p>
          <p class="muted">Berechnet aus Rate, Zins und Tilgung.</p>
        </article>
        <article class="card">
          <h2>Bezahlbare Gesamtkosten</h2>
          <p id="calculated-rate" class="value">–</p>
          <p class="muted">Mögliches Darlehen plus Ihr Vermögen.</p>
        </article>
      </section>

      <section id="result-card" class="card result-card">
        <h2>Finanzierbarkeit</h2>
        <p id="affordability-message" class="muted">
          Füllen Sie das Formular aus, um zu sehen, wie hoch Ihr maximaler Immobilienpreis ist.
        </p>
      </section>

      <section class="card market-insights" id="market-insights">
        <h2>Marktüberblick für Ihre Region</h2>
        <p class="muted" id="market-insights-message">
          Berechnen Sie zuerst Ihre Finanzierbarkeit und geben Sie Ihre PLZ an, um Durchschnittspreise und Beispielobjekte zu sehen.
        </p>
        <div class="market-metric">
          <p class="muted">Ø Kaufpreis pro m²</p>
          <p id="average-price-value" class="value">–</p>
        </div>
        <div class="listings">
          <div class="listings-header">
            <h3>Beispielangebote</h3>
            <p class="muted" id="listings-message">Es wurden noch keine Immobilien berechnet.</p>
          </div>
          <ul class="listing-results" id="listing-results"></ul>
        </div>
      </section>

      <section class="next-steps">
        <h2>Nächste Schritte</h2>
        <div class="next-steps-grid">
          <article class="next-step-column">
            <h3 class="column-title">Finanzierungsanbieter</h3>
            <div class="broker-buttons">
              <a class="broker-button" href="#">interhyp</a>
              <a class="broker-button" href="#">BAUFI24</a>
              <a class="broker-button" href="#">Dr. Klein</a>
              <a class="broker-button" href="#">Hüttig &amp; Rompf</a>
              <a class="broker-button" href="#">Hypofriend</a>
            </div>
          </article>
          <article class="next-step-column">
            <h3 class="column-title">Weitere Berechnungen</h3>
            <p class="muted">
              Finden Sie heraus, ob sich ein Eigenheim für Sie mehr lohnt als eine Mietwohnung.
            </p>
            <a class="broker-button" href="{{ url_for('buy_to_let_page') }}">Vermietungsszenario simulieren</a>
          </article>
          <article class="next-step-column">
            <h3 class="column-title">Wohnungsangebot</h3>
            <p class="muted">
              Entdecken Sie verfügbare Wohnungen und Häuser in Ihrer Umgebung.
            </p>
            <a class="broker-button" href="{{ url_for('housing_page') }}"
              >Finde geeignete Wohnungen in meiner Gegend</a
            >
          </article>
        </div>
      </section>
    </main>

    <script src="{{ url_for('static', filename='js/storage.js') }}"></script>
    <script src="{{ url_for('static', filename='js/mortgage.js') }}"></script>
  </body>
</html>
